const calculateGameSize=()=>{const _0x415921=0x2ee,_0x407a68=window['innerHeight'],_0x28e84d=Math['min'](_0x407a68,_0x415921),_0x230eb4=window['innerWidth']>0x300,_0x3fc1c8=_0x230eb4?window['innerWidth']:Math['floor'](_0x28e84d*(0x140/0x1f9));return{'width':_0x3fc1c8,'height':_0x28e84d,'isDesktop':_0x230eb4};},gameSize=calculateGameSize();var game=new Phaser['Game'](gameSize['width'],gameSize['height'],Phaser['AUTO'],'game');game['isDesktop']=gameSize['isDesktop'];typeof supabaseClient==='undefined'&&(console['error']('Supabase\x20client\x20not\x20initialized'),window['location']['href']=window['baseUrl']);game['States']={},game['States']['boot']=function(){this['preload']=function(){!game['device']['desktop']&&(this['scale']['scaleMode']=Phaser['ScaleManager']['EXACT_FIT'],this['scale']['forcePortrait']=!![],this['scale']['refresh']()),game['load']['image']('loading','assets/preloader.gif');},this['create']=function(){const _0x2e1ba4=localStorage['getItem']('username');_0x2e1ba4&&window['posthog']&&posthog['identify'](_0x2e1ba4,{'username':_0x2e1ba4,'$name':_0x2e1ba4}),game['state']['start']('preload');};},game['States']['preload']=function(){this['preload']=function(){var preloadSprite=game['add']['sprite'](0x23,game['height']/0x2,'loading');game['load']['setPreloadSprite'](preloadSprite);const _0x173c04='./assets/';game['load']['image']('background',_0x173c04+'background.png'),game['load']['image']('ground',_0x173c04+'ground.png'),game['load']['image']('title',_0x173c04+'title.png'),game['load']['spritesheet']('bird',_0x173c04+'bird.png',0x22,0x18,0x3),game['load']['image']('btn',_0x173c04+'start-button.png'),game['load']['spritesheet']('pipe',_0x173c04+'pipes.png',0x36,0x140,0x2),game['load']['bitmapFont']('flappy_font',_0x173c04+'fonts/flappyfont/flappyfont.png',_0x173c04+'fonts/flappyfont/flappyfont.fnt'),game['load']['audio']('fly_sound',_0x173c04+'flap.wav'),game['load']['audio']('score_sound',_0x173c04+'score.wav'),game['load']['audio']('hit_pipe_sound',_0x173c04+'pipe-hit.wav'),game['load']['audio']('hit_ground_sound',_0x173c04+'ouch.wav'),game['load']['image']('ready_text',_0x173c04+'get-ready.png'),game['load']['image']('play_tip',_0x173c04+'instructions.png'),game['load']['image']('game_over',_0x173c04+'gameover.png'),game['load']['image']('score_board',_0x173c04+'scoreboard.png'),game['load']['image']('start-button','assets/start-button.png'),game['load']['image']('ranking-button','assets/ranking-button.png');},this['create']=function(){game['state']['start']('menu');};},game['States']['menu']=function(){this['create']=function(){game['add']['tileSprite'](0x0,0x0,game['width'],game['height'],'background')['autoScroll'](-0xa,0x0),game['add']['tileSprite'](0x0,game['height']-0x70,game['width'],0x70,'ground')['autoScroll'](-0x64,0x0);var _0x132a73=game['add']['group']();_0x132a73['create'](0x0,0x0,'title');var _0x1e0bea=_0x132a73['create'](0xbe,0xa,'bird');_0x1e0bea['animations']['add']('fly'),_0x1e0bea['animations']['play']('fly',0xc,!![]),_0x132a73['x']=0x23,_0x132a73['y']=0x64,game['add']['tween'](_0x132a73)['to']({'y':0x78},0x3e8,null,!![],0x0,Number['MAX_VALUE'],!![]);const startGame=function(){game['state']['start']('play');};var _0x322083=game['add']['button'](game['width']/0x2,game['height']/0x2,'btn',startGame);_0x322083['anchor']['setTo'](0.5,0.5);var _0x472d30=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']);_0x472d30['onDown']['addOnce'](startGame);};},game['States']['play']={'create':function(){window['posthog']&&posthog['startSessionRecording']();this['bg']=game['add']['tileSprite'](0x0,0x0,game['width'],game['height'],'background'),this['pipeGroup']=game['add']['group'](),this['pipeGroup']['enableBody']=!![],this['ground']=game['add']['tileSprite'](0x0,game['height']-0x70,game['width'],0x70,'ground');const _0x10d0eb=game['isDesktop']?window['innerWidth']*0.2:0x32;this['bird']=game['add']['sprite'](_0x10d0eb,0x96,'bird'),this['bird']['animations']['add']('fly'),this['bird']['animations']['play']('fly',0xc,!![]),this['bird']['anchor']['setTo'](0.5,0.5),game['physics']['enable'](this['bird'],Phaser['Physics']['ARCADE']),this['bird']['body']['gravity']['y']=0x0,game['physics']['enable'](this['ground'],Phaser['Physics']['ARCADE']),this['ground']['body']['immovable']=!![],this['soundFly']=game['add']['sound']('fly_sound'),this['soundFly']['volume']=0x3,this['soundScore']=game['add']['sound']('score_sound'),this['soundScore']['volume']=0.5,this['soundHitPipe']=game['add']['sound']('hit_pipe_sound'),this['soundHitGround']=game['add']['sound']('hit_ground_sound'),this['scoreText']=game['add']['bitmapText'](game['world']['centerX']-0x14,0x1e,'flappy_font','0',0x24),this['readyText']=game['add']['image'](game['width']/0x2,0x28,'ready_text'),this['playTip']=game['add']['image'](game['width']/0x2,0x12c,'play_tip'),this['readyText']['anchor']['setTo'](0.5,0x0),this['playTip']['anchor']['setTo'](0.5,0x0),this['hasStarted']=![];const _0x3b4662=game['isDesktop']?0x3e8:0x384;game['time']['events']['loop'](_0x3b4662,this['generatePipes'],this),game['time']['events']['stop'](![]),game['input']['onDown']['addOnce'](this['statrGame'],this),this['spaceKey']=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']),this['spaceKey']['onDown']['addOnce'](this['statrGame'],this),this['gameStartTime']=null;},'update':function(){if(!this['hasStarted'])return;this['bird']['y']<0x0&&this['hitBoundary']();game['physics']['arcade']['collide'](this['bird'],this['ground'],this['hitGround'],null,this),game['physics']['arcade']['overlap'](this['bird'],this['pipeGroup'],this['hitPipe'],null,this);if(this['bird']['angle']<0x5a)this['bird']['angle']+=2.5;this['pipeGroup']['forEachExists'](this['checkScore'],this);},'statrGame':function(){if(this['hasStarted'])return;this['gameIsOver']=![],this['hasHitGround']=![],this['hasStarted']=!![],this['score']=0x0,game['isDesktop']?this['gameSpeed']=0x15e*(game['width']/0x780):this['gameSpeed']=0xc8,this['bg']['autoScroll'](-(this['gameSpeed']/0xa),0x0),this['ground']['autoScroll'](-this['gameSpeed'],0x0),this['bird']['body']['gravity']['y']=0x47e,this['readyText']['destroy'](),this['playTip']['destroy'](),game['input']['onDown']['add'](this['fly'],this),this['spaceKey']=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']),this['spaceKey']['onDown']['add'](this['fly'],this),game['time']['events']['start'](),this['gameStartTime']=Date['now']();},'stopGame':function(){this['bg']['stopScroll'](),this['ground']['stopScroll'](),this['pipeGroup']['forEachExists'](function(_0xe72ae1){_0xe72ae1['body']['velocity']['x']=0x0;},this),this['bird']['animations']['stop']('fly',0x0),game['input']['onDown']['remove'](this['fly'],this),this['spaceKey']&&this['spaceKey']['onDown']['remove'](this['fly'],this),game['time']['events']['stop'](!![]);},'fly':function(){this['bird']['body']['velocity']['y']=-0x15e,game['add']['tween'](this['bird'])['to']({'angle':-0x1e},0x64,null,!![],0x0,0x0,![]),this['soundFly']['play']();},'hitPipe':function(){if(this['gameIsOver'])return;this['soundHitPipe']['play'](),this['gameOver']();},'hitGround':function(){if(this['gameIsOver'])return;this['hasHitGround']=!![],this['soundHitGround']['play'](),this['gameOver']();},'gameOver':function(){if(this['gameIsOver'])return;this['gameIsOver']=!![];const _0x5f485e=localStorage['getItem']('username'),_0x4e14e1=this['gameStartTime']?Math['floor']((Date['now']()-this['gameStartTime'])/0x3e8):0x0;try{typeof posthog!=='undefined'&&posthog['capture']('game_completed',{'username':_0x5f485e,'score':this['score'],'duration_seconds':_0x4e14e1});}catch(_0x1a74c0){console['error']('PostHog\x20error:',_0x1a74c0);}this['stopGame'](),this['saveScore'](this['score']),supabaseClient['from']('scores')['select']('score')['eq']('username',_0x5f485e)['order']('score',{'ascending':![]})['limit'](0x1)['then'](_0x645e83=>{if(_0x645e83['error'])console['error']('Error\x20fetching\x20best\x20score:',_0x645e83['error']),this['showGameOverScreen'](0x0);else{const _0x3fe0e4=_0x645e83['data']['length']>0x0?_0x645e83['data'][0x0]['score']:0x0;this['showGameOverScreen'](_0x3fe0e4);}})['catch'](error=>{console['error']('Error:',error),this['showGameOverScreen'](0x0);});},'showGameOverScreen':function(_0x428b39){this['gameOverGroup']=game['add']['group']();var gameOverText=this['gameOverGroup']['create'](game['width']/0x2,0x0,'game_over'),_0x2e1c25=this['gameOverGroup']['create'](game['width']/0x2,0x46,'score_board'),currentScoreText=game['add']['bitmapText'](game['width']/0x2+0x3c,0x69,'flappy_font',this['score']+'',0x14,this['gameOverGroup']),bestScoreText=game['add']['bitmapText'](game['width']/0x2+0x3c,0x99,'flappy_font',_0x428b39+'',0x14,this['gameOverGroup']);gameOverText['anchor']['setTo'](0.5,0x0),_0x2e1c25['anchor']['setTo'](0.5,0x0),this['gameOverGroup']['y']=0x1e,this['restartBtn']=game['add']['button'](game['width']/0x2,game['height']/0x2,'start-button',this['restartGame'],this),this['restartBtn']['anchor']['setTo'](0.5,0.5),this['rankingBtn']=game['add']['button'](game['width']/0x2,game['height']/0x2+0x50,'ranking-button',function(){window['location']['href']=window['baseUrl'];},this),this['rankingBtn']['anchor']['setTo'](0.5,0.5),this['spaceKey']=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']),this['spaceKey']['onDown']['addOnce'](this['restartGame'],this);},'saveScore':function(_0x2381c0){const _0x35fe06=localStorage['getItem']('username');if(!_0x35fe06){console['error']('Username\x20not\x20found');return;}const _0x7bfba1=Math['random']()['toString'](0x24)['substring'](0x2)+Date['now']()['toString'](0x24);console['log']('Saving\x20score:',{'username':_0x35fe06,'user_id':_0x7bfba1,'score':_0x2381c0}),supabaseClient['from']('scores')['insert']([{'username':_0x35fe06,'user_id':_0x7bfba1,'score':_0x2381c0}])['then'](_0x5deb7a=>{_0x5deb7a['error']?console['error']('Error\x20saving\x20score:',_0x5deb7a['error']):console['log']('Score\x20saved\x20successfully:',_0x5deb7a['data']);})['catch'](error=>{console['error']('Error\x20saving\x20score:',error);});},'generatePipes':function(_0x11f3ab){game['isDesktop']?_0x11f3ab=0x64:_0x11f3ab=_0x11f3ab||0x64;const _0x2aae3f=0x1f9-0x140-_0x11f3ab+Math['floor']((0x1f9-0x70-0x1e-_0x11f3ab-0x1f9+0x140+_0x11f3ab)*Math['random']()),_0x2b2e94=_0x2aae3f-0x168,_0x5b4483=_0x2aae3f+_0x11f3ab;if(this['resetPipe'](_0x2b2e94,_0x5b4483))return;const _0x79d3d5=game['width'];var _0x340a52=game['add']['sprite'](_0x79d3d5,_0x2b2e94,'pipe',0x0,this['pipeGroup']),_0x5b26d3=game['add']['sprite'](_0x79d3d5,_0x5b4483,'pipe',0x1,this['pipeGroup']);this['pipeGroup']['setAll']('checkWorldBounds',!![]),this['pipeGroup']['setAll']('outOfBoundsKill',!![]),this['pipeGroup']['setAll']('body.velocity.x',-this['gameSpeed']);},'resetPipe':function(_0x39c667,_0x4fc2ea){var _0x2f6bd2=0x0;const _0x22cf72=game['isDesktop']?game['width']:game['width'];return this['pipeGroup']['forEachDead'](function(_0x562f6c){_0x562f6c['y']<=0x0?(_0x562f6c['reset'](_0x22cf72,_0x39c667),_0x562f6c['hasScored']=![]):_0x562f6c['reset'](_0x22cf72,_0x4fc2ea),_0x562f6c['body']['velocity']['x']=-this['gameSpeed'],_0x2f6bd2++;},this),_0x2f6bd2==0x2;},'checkScore':function(_0x2852e9){if(!_0x2852e9['hasScored']&&_0x2852e9['y']<=0x0&&_0x2852e9['x']<=this['bird']['x']-0x11-0x36)return _0x2852e9['hasScored']=!![],this['scoreText']['text']=++this['score'],this['soundScore']['play'](),!![];return![];},'hitBoundary':function(){if(this['gameIsOver'])return;this['soundHitPipe']['play'](),this['gameOver']();},'restartGame':function(){game['state']['start']('play');},'shutdown':function(){window['posthog']&&posthog['stopSessionRecording']();}},game['state']['remove']('over'),game['state']['add']('boot',game['States']['boot']),game['state']['add']('preload',game['States']['preload']),game['state']['add']('menu',game['States']['menu']),game['state']['add']('play',game['States']['play']),game['state']['start']('boot');