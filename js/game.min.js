const calculateGameSize=()=>{const _0x1c3bd4=0x2ee,_0x2a01d1=window['innerHeight'],_0x2ebef3=Math['min'](_0x2a01d1,_0x1c3bd4),_0x4b813c=window['innerWidth']>0x300,_0x343454=_0x4b813c?window['innerWidth']:Math['floor'](_0x2ebef3*(0x140/0x1f9));return{'width':_0x343454,'height':_0x2ebef3,'isDesktop':_0x4b813c};},gameSize=calculateGameSize();var game=new Phaser['Game'](gameSize['width'],gameSize['height'],Phaser['AUTO'],'game');game['isDesktop']=gameSize['isDesktop'];typeof supabaseClient==='undefined'&&(console['error']('Supabase\x20client\x20not\x20initialized'),window['location']['href']=window['baseUrl']);game['States']={},game['States']['boot']=function(){this['preload']=function(){!game['device']['desktop']&&(this['scale']['scaleMode']=Phaser['ScaleManager']['EXACT_FIT'],this['scale']['forcePortrait']=!![],this['scale']['refresh']()),game['load']['image']('loading','assets/preloader.gif');},this['create']=function(){game['state']['start']('preload');};},game['States']['preload']=function(){this['preload']=function(){var preloadSprite=game['add']['sprite'](0x23,game['height']/0x2,'loading');game['load']['setPreloadSprite'](preloadSprite);const _0x44a51b='./assets/';game['load']['image']('background',_0x44a51b+'background.png'),game['load']['image']('ground',_0x44a51b+'ground.png'),game['load']['image']('title',_0x44a51b+'title.png'),game['load']['spritesheet']('bird',_0x44a51b+'bird.png',0x22,0x18,0x3),game['load']['image']('btn',_0x44a51b+'start-button.png'),game['load']['spritesheet']('pipe',_0x44a51b+'pipes.png',0x36,0x140,0x2),game['load']['bitmapFont']('flappy_font',_0x44a51b+'fonts/flappyfont/flappyfont.png',_0x44a51b+'fonts/flappyfont/flappyfont.fnt'),game['load']['audio']('fly_sound',_0x44a51b+'flap.wav'),game['load']['audio']('score_sound',_0x44a51b+'score.wav'),game['load']['audio']('hit_pipe_sound',_0x44a51b+'pipe-hit.wav'),game['load']['audio']('hit_ground_sound',_0x44a51b+'ouch.wav'),game['load']['image']('ready_text',_0x44a51b+'get-ready.png'),game['load']['image']('play_tip',_0x44a51b+'instructions.png'),game['load']['image']('game_over',_0x44a51b+'gameover.png'),game['load']['image']('score_board',_0x44a51b+'scoreboard.png'),game['load']['image']('start-button','assets/start-button.png'),game['load']['image']('ranking-button','assets/ranking-button.png');},this['create']=function(){game['state']['start']('menu');};},game['States']['menu']=function(){this['create']=function(){game['add']['tileSprite'](0x0,0x0,game['width'],game['height'],'background')['autoScroll'](-0xa,0x0),game['add']['tileSprite'](0x0,game['height']-0x70,game['width'],0x70,'ground')['autoScroll'](-0x64,0x0);var _0x11cfb9=game['add']['group']();_0x11cfb9['create'](0x0,0x0,'title');var _0x1d2308=_0x11cfb9['create'](0xbe,0xa,'bird');_0x1d2308['animations']['add']('fly'),_0x1d2308['animations']['play']('fly',0xc,!![]),_0x11cfb9['x']=0x23,_0x11cfb9['y']=0x64,game['add']['tween'](_0x11cfb9)['to']({'y':0x78},0x3e8,null,!![],0x0,Number['MAX_VALUE'],!![]);const startGame=function(){game['state']['start']('play');};var _0x51d3b1=game['add']['button'](game['width']/0x2,game['height']/0x2,'btn',startGame);_0x51d3b1['anchor']['setTo'](0.5,0.5);var _0x153cb8=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']);_0x153cb8['onDown']['addOnce'](startGame);};},game['States']['play']={'create':function(){this['bg']=game['add']['tileSprite'](0x0,0x0,game['width'],game['height'],'background'),this['pipeGroup']=game['add']['group'](),this['pipeGroup']['enableBody']=!![],this['ground']=game['add']['tileSprite'](0x0,game['height']-0x70,game['width'],0x70,'ground');const _0x22bebb=game['isDesktop']?window['innerWidth']*0.2:0x32;this['bird']=game['add']['sprite'](_0x22bebb,0x96,'bird'),this['bird']['animations']['add']('fly'),this['bird']['animations']['play']('fly',0xc,!![]),this['bird']['anchor']['setTo'](0.5,0.5),game['physics']['enable'](this['bird'],Phaser['Physics']['ARCADE']),this['bird']['body']['gravity']['y']=0x0,game['physics']['enable'](this['ground'],Phaser['Physics']['ARCADE']),this['ground']['body']['immovable']=!![],this['soundFly']=game['add']['sound']('fly_sound'),this['soundFly']['volume']=0x3,this['soundScore']=game['add']['sound']('score_sound'),this['soundScore']['volume']=0.5,this['soundHitPipe']=game['add']['sound']('hit_pipe_sound'),this['soundHitGround']=game['add']['sound']('hit_ground_sound'),this['scoreText']=game['add']['bitmapText'](game['world']['centerX']-0x14,0x1e,'flappy_font','0',0x24),this['readyText']=game['add']['image'](game['width']/0x2,0x28,'ready_text'),this['playTip']=game['add']['image'](game['width']/0x2,0x12c,'play_tip'),this['readyText']['anchor']['setTo'](0.5,0x0),this['playTip']['anchor']['setTo'](0.5,0x0),this['hasStarted']=![];const _0xa78164=game['isDesktop']?0x3e8:0x384;game['time']['events']['loop'](_0xa78164,this['generatePipes'],this),game['time']['events']['stop'](![]),game['input']['onDown']['addOnce'](this['statrGame'],this),this['spaceKey']=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']),this['spaceKey']['onDown']['addOnce'](this['statrGame'],this);},'update':function(){if(!this['hasStarted'])return;this['bird']['y']<0x0&&this['hitBoundary']();game['physics']['arcade']['collide'](this['bird'],this['ground'],this['hitGround'],null,this),game['physics']['arcade']['overlap'](this['bird'],this['pipeGroup'],this['hitPipe'],null,this);if(this['bird']['angle']<0x5a)this['bird']['angle']+=2.5;this['pipeGroup']['forEachExists'](this['checkScore'],this);},'statrGame':function(){if(this['hasStarted'])return;this['gameIsOver']=![],this['hasHitGround']=![],this['hasStarted']=!![],this['score']=0x0,game['isDesktop']?this['gameSpeed']=0x15e*(game['width']/0x780):this['gameSpeed']=0xc8,this['bg']['autoScroll'](-(this['gameSpeed']/0xa),0x0),this['ground']['autoScroll'](-this['gameSpeed'],0x0),this['bird']['body']['gravity']['y']=0x47e,this['readyText']['destroy'](),this['playTip']['destroy'](),game['input']['onDown']['add'](this['fly'],this),this['spaceKey']=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']),this['spaceKey']['onDown']['add'](this['fly'],this),game['time']['events']['start']();},'stopGame':function(){this['bg']['stopScroll'](),this['ground']['stopScroll'](),this['pipeGroup']['forEachExists'](function(_0x46bbc2){_0x46bbc2['body']['velocity']['x']=0x0;},this),this['bird']['animations']['stop']('fly',0x0),game['input']['onDown']['remove'](this['fly'],this),this['spaceKey']&&this['spaceKey']['onDown']['remove'](this['fly'],this),game['time']['events']['stop'](!![]);},'fly':function(){this['bird']['body']['velocity']['y']=-0x15e,game['add']['tween'](this['bird'])['to']({'angle':-0x1e},0x64,null,!![],0x0,0x0,![]),this['soundFly']['play']();},'hitPipe':function(){if(this['gameIsOver'])return;this['soundHitPipe']['play'](),this['gameOver']();},'hitGround':function(){if(this['gameIsOver'])return;this['hasHitGround']=!![],this['soundHitGround']['play'](),this['gameOver']();},'gameOver':function(){if(this['gameIsOver'])return;this['gameIsOver']=!![],this['stopGame'](),this['saveScore'](this['score']);const _0x28e11d=localStorage['getItem']('username');supabaseClient['from']('scores')['select']('score')['eq']('username',_0x28e11d)['order']('score',{'ascending':![]})['limit'](0x1)['then'](_0x36c69f=>{if(_0x36c69f['error'])console['error']('Error\x20fetching\x20best\x20score:',_0x36c69f['error']),this['showGameOverScreen'](0x0);else{const _0x47328f=_0x36c69f['data']['length']>0x0?_0x36c69f['data'][0x0]['score']:0x0;this['showGameOverScreen'](_0x47328f);}})['catch'](_0x420767=>{console['error']('Error:',_0x420767),this['showGameOverScreen'](0x0);});},'showGameOverScreen':function(_0x242b12){this['gameOverGroup']=game['add']['group']();var gameOverText=this['gameOverGroup']['create'](game['width']/0x2,0x0,'game_over'),_0x8131b9=this['gameOverGroup']['create'](game['width']/0x2,0x46,'score_board'),currentScoreText=game['add']['bitmapText'](game['width']/0x2+0x3c,0x69,'flappy_font',this['score']+'',0x14,this['gameOverGroup']),bestScoreText=game['add']['bitmapText'](game['width']/0x2+0x3c,0x99,'flappy_font',_0x242b12+'',0x14,this['gameOverGroup']);gameOverText['anchor']['setTo'](0.5,0x0),_0x8131b9['anchor']['setTo'](0.5,0x0),this['gameOverGroup']['y']=0x1e,this['restartBtn']=game['add']['button'](game['width']/0x2,game['height']/0x2,'start-button',this['restartGame'],this),this['restartBtn']['anchor']['setTo'](0.5,0.5),this['rankingBtn']=game['add']['button'](game['width']/0x2,game['height']/0x2+0x50,'ranking-button',function(){window['location']['href']=window['baseUrl'];},this),this['rankingBtn']['anchor']['setTo'](0.5,0.5),this['spaceKey']=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']),this['spaceKey']['onDown']['addOnce'](this['restartGame'],this);},'saveScore':function(_0xb1bee2){const _0x2e3f5f=localStorage['getItem']('username');if(!_0x2e3f5f){console['error']('Username\x20not\x20found');return;}const _0x134b3a=Math['random']()['toString'](0x24)['substring'](0x2)+Date['now']()['toString'](0x24);console['log']('Saving\x20score:',{'username':_0x2e3f5f,'user_id':_0x134b3a,'score':_0xb1bee2}),supabaseClient['from']('scores')['insert']([{'username':_0x2e3f5f,'user_id':_0x134b3a,'score':_0xb1bee2}])['then'](_0x3a0ae0=>{_0x3a0ae0['error']?console['error']('Error\x20saving\x20score:',_0x3a0ae0['error']):console['log']('Score\x20saved\x20successfully:',_0x3a0ae0['data']);})['catch'](_0x5ed910=>{console['error']('Error\x20saving\x20score:',_0x5ed910);});},'generatePipes':function(_0x161d3f){game['isDesktop']?_0x161d3f=0x64:_0x161d3f=_0x161d3f||0x64;const _0x52fcdd=0x1f9-0x140-_0x161d3f+Math['floor']((0x1f9-0x70-0x1e-_0x161d3f-0x1f9+0x140+_0x161d3f)*Math['random']()),_0x45c831=_0x52fcdd-0x168,_0x486071=_0x52fcdd+_0x161d3f;if(this['resetPipe'](_0x45c831,_0x486071))return;const _0x12a202=game['width'];var _0x378b3d=game['add']['sprite'](_0x12a202,_0x45c831,'pipe',0x0,this['pipeGroup']),_0x3bfb06=game['add']['sprite'](_0x12a202,_0x486071,'pipe',0x1,this['pipeGroup']);this['pipeGroup']['setAll']('checkWorldBounds',!![]),this['pipeGroup']['setAll']('outOfBoundsKill',!![]),this['pipeGroup']['setAll']('body.velocity.x',-this['gameSpeed']);},'resetPipe':function(_0x2f8b05,_0x42ecfe){var _0x5608c6=0x0;const _0x12f88d=game['isDesktop']?game['width']:game['width'];return this['pipeGroup']['forEachDead'](function(_0x2c8af0){_0x2c8af0['y']<=0x0?(_0x2c8af0['reset'](_0x12f88d,_0x2f8b05),_0x2c8af0['hasScored']=![]):_0x2c8af0['reset'](_0x12f88d,_0x42ecfe),_0x2c8af0['body']['velocity']['x']=-this['gameSpeed'],_0x5608c6++;},this),_0x5608c6==0x2;},'checkScore':function(_0x45bf7a){if(!_0x45bf7a['hasScored']&&_0x45bf7a['y']<=0x0&&_0x45bf7a['x']<=this['bird']['x']-0x11-0x36)return _0x45bf7a['hasScored']=!![],this['scoreText']['text']=++this['score'],this['soundScore']['play'](),!![];return![];},'hitBoundary':function(){if(this['gameIsOver'])return;this['soundHitPipe']['play'](),this['gameOver']();},'restartGame':function(){game['state']['start']('play');}},game['state']['remove']('over'),game['state']['add']('boot',game['States']['boot']),game['state']['add']('preload',game['States']['preload']),game['state']['add']('menu',game['States']['menu']),game['state']['add']('play',game['States']['play']),game['state']['start']('boot');