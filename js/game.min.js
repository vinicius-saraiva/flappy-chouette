const calculateGameSize=()=>{const _0x292ce7=0x2ee,_0x55647b=window['innerHeight'],_0x1cc5f3=Math['min'](_0x55647b,_0x292ce7),_0x25c731=window['innerWidth']>0x300,_0x4a14b9=_0x25c731?window['innerWidth']:Math['floor'](_0x1cc5f3*(0x140/0x1f9));return{'width':_0x4a14b9,'height':_0x1cc5f3,'isDesktop':_0x25c731};},gameSize=calculateGameSize();var game=new Phaser['Game'](gameSize['width'],gameSize['height'],Phaser['AUTO'],'game');game['isDesktop']=gameSize['isDesktop'];typeof supabaseClient==='undefined'&&(console['error']('Supabase\x20client\x20not\x20initialized'),window['location']['href']=window['baseUrl']);game['States']={},game['States']['boot']=function(){this['preload']=function(){!game['device']['desktop']&&(this['scale']['scaleMode']=Phaser['ScaleManager']['EXACT_FIT'],this['scale']['forcePortrait']=!![],this['scale']['refresh']()),game['load']['image']('loading','assets/preloader.gif');},this['create']=function(){const _0xca438e=localStorage['getItem']('username');_0xca438e&&window['posthog']&&posthog['identify'](_0xca438e,{'username':_0xca438e,'$name':_0xca438e}),game['state']['start']('preload');};},game['States']['preload']=function(){this['preload']=function(){var preloadSprite=game['add']['sprite'](0x23,game['height']/0x2,'loading');game['load']['setPreloadSprite'](preloadSprite);const _0x70f894='./assets/';game['load']['image']('background',_0x70f894+'background.png'),game['load']['image']('ground',_0x70f894+'ground.png'),game['load']['image']('title',_0x70f894+'title.png'),game['load']['spritesheet']('bird',_0x70f894+'bird.png',0x22,0x18,0x3),game['load']['image']('btn',_0x70f894+'start-button.png'),game['load']['spritesheet']('pipe',_0x70f894+'pipes.png',0x36,0x140,0x2),game['load']['bitmapFont']('flappy_font',_0x70f894+'fonts/flappyfont/flappyfont.png',_0x70f894+'fonts/flappyfont/flappyfont.fnt'),game['load']['audio']('fly_sound',_0x70f894+'flap.wav'),game['load']['audio']('score_sound',_0x70f894+'score.wav'),game['load']['audio']('hit_pipe_sound',_0x70f894+'pipe-hit.wav'),game['load']['audio']('hit_ground_sound',_0x70f894+'ouch.wav'),game['load']['image']('ready_text',_0x70f894+'get-ready.png'),game['load']['image']('play_tip',_0x70f894+'instructions.png'),game['load']['image']('game_over',_0x70f894+'gameover.png'),game['load']['image']('score_board',_0x70f894+'scoreboard.png'),game['load']['image']('start-button','assets/start-button.png'),game['load']['image']('ranking-button','assets/ranking-button.png');},this['create']=function(){game['state']['start']('menu');};},game['States']['menu']=function(){this['create']=function(){game['add']['tileSprite'](0x0,0x0,game['width'],game['height'],'background')['autoScroll'](-0xa,0x0),game['add']['tileSprite'](0x0,game['height']-0x70,game['width'],0x70,'ground')['autoScroll'](-0x64,0x0);var _0x29c198=game['add']['group']();_0x29c198['create'](0x0,0x0,'title');var _0x277e99=_0x29c198['create'](0xbe,0xa,'bird');_0x277e99['animations']['add']('fly'),_0x277e99['animations']['play']('fly',0xc,!![]),_0x29c198['x']=0x23,_0x29c198['y']=0x64,game['add']['tween'](_0x29c198)['to']({'y':0x78},0x3e8,null,!![],0x0,Number['MAX_VALUE'],!![]);const startGame=function(){game['state']['start']('play');};var _0x14337c=game['add']['button'](game['width']/0x2,game['height']/0x2,'btn',startGame);_0x14337c['anchor']['setTo'](0.5,0.5);var _0x50944a=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']);_0x50944a['onDown']['addOnce'](startGame);};},game['States']['play']={'create':function(){window['posthog']&&posthog['startSessionRecording']();this['bg']=game['add']['tileSprite'](0x0,0x0,game['width'],game['height'],'background'),this['pipeGroup']=game['add']['group'](),this['pipeGroup']['enableBody']=!![],this['ground']=game['add']['tileSprite'](0x0,game['height']-0x70,game['width'],0x70,'ground');const _0x6c8eeb=game['isDesktop']?window['innerWidth']*0.2:0x32;this['bird']=game['add']['sprite'](_0x6c8eeb,0x96,'bird'),this['bird']['animations']['add']('fly'),this['bird']['animations']['play']('fly',0xc,!![]),this['bird']['anchor']['setTo'](0.5,0.5),game['physics']['enable'](this['bird'],Phaser['Physics']['ARCADE']),this['bird']['body']['gravity']['y']=0x0,game['physics']['enable'](this['ground'],Phaser['Physics']['ARCADE']),this['ground']['body']['immovable']=!![],this['soundFly']=game['add']['sound']('fly_sound'),this['soundFly']['volume']=0x3,this['soundScore']=game['add']['sound']('score_sound'),this['soundScore']['volume']=0.5,this['soundHitPipe']=game['add']['sound']('hit_pipe_sound'),this['soundHitGround']=game['add']['sound']('hit_ground_sound'),this['scoreText']=game['add']['bitmapText'](game['world']['centerX']-0x14,0x1e,'flappy_font','0',0x24),this['readyText']=game['add']['image'](game['width']/0x2,0x28,'ready_text'),this['playTip']=game['add']['image'](game['width']/0x2,0x12c,'play_tip'),this['readyText']['anchor']['setTo'](0.5,0x0),this['playTip']['anchor']['setTo'](0.5,0x0),this['hasStarted']=![];const _0x5eb7bd=game['isDesktop']?0x3e8:0x384;game['time']['events']['loop'](_0x5eb7bd,this['generatePipes'],this),game['time']['events']['stop'](![]),game['input']['onDown']['addOnce'](this['statrGame'],this),this['spaceKey']=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']),this['spaceKey']['onDown']['addOnce'](this['statrGame'],this),this['gameStartTime']=null;},'update':function(){if(!this['hasStarted'])return;this['bird']['y']<0x0&&this['hitBoundary']();game['physics']['arcade']['collide'](this['bird'],this['ground'],this['hitGround'],null,this),game['physics']['arcade']['overlap'](this['bird'],this['pipeGroup'],this['hitPipe'],null,this);if(this['bird']['angle']<0x5a)this['bird']['angle']+=2.5;this['pipeGroup']['forEachExists'](this['checkScore'],this);},'statrGame':function(){if(this['hasStarted'])return;this['gameIsOver']=![],this['hasHitGround']=![],this['hasStarted']=!![],this['score']=0x0,game['isDesktop']?this['gameSpeed']=0x15e*(game['width']/0x780):this['gameSpeed']=0xc8,this['bg']['autoScroll'](-(this['gameSpeed']/0xa),0x0),this['ground']['autoScroll'](-this['gameSpeed'],0x0),this['bird']['body']['gravity']['y']=0x47e,this['readyText']['destroy'](),this['playTip']['destroy'](),game['input']['onDown']['add'](this['fly'],this),this['spaceKey']=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']),this['spaceKey']['onDown']['add'](this['fly'],this),game['time']['events']['start'](),this['gameStartTime']=Date['now']();},'stopGame':function(){this['bg']['stopScroll'](),this['ground']['stopScroll'](),this['pipeGroup']['forEachExists'](function(_0x558560){_0x558560['body']['velocity']['x']=0x0;},this),this['bird']['animations']['stop']('fly',0x0),game['input']['onDown']['remove'](this['fly'],this),this['spaceKey']&&this['spaceKey']['onDown']['remove'](this['fly'],this),game['time']['events']['stop'](!![]);},'fly':function(){this['bird']['body']['velocity']['y']=-0x15e,game['add']['tween'](this['bird'])['to']({'angle':-0x1e},0x64,null,!![],0x0,0x0,![]),this['soundFly']['play']();},'hitPipe':function(){if(this['gameIsOver'])return;this['soundHitPipe']['play'](),this['gameOver']();},'hitGround':function(){if(this['gameIsOver'])return;this['hasHitGround']=!![],this['soundHitGround']['play'](),this['gameOver']();},'gameOver':function(){if(this['gameIsOver'])return;this['gameIsOver']=!![];const _0x2c2b4a=localStorage['getItem']('username'),_0x8056eb=this['gameStartTime']?Math['floor']((Date['now']()-this['gameStartTime'])/0x3e8):0x0;console['log']('Game\x20Over\x20triggered:',{'username':_0x2c2b4a,'score':this['score'],'duration_seconds':_0x8056eb,'posthog_available':typeof posthog!=='undefined'});try{typeof posthog!=='undefined'?(posthog['capture']('game_completed',{'username':_0x2c2b4a,'score':this['score'],'duration_seconds':_0x8056eb},{'send_instantly':!![]}),console['log']('PostHog\x20event\x20sent')):console['error']('PostHog\x20not\x20available\x20-\x20event\x20not\x20sent');}catch(_0x2e63b5){console['error']('PostHog\x20error:',_0x2e63b5);}this['stopGame'](),this['saveScore'](this['score']),supabaseClient['from']('scores')['select']('score')['eq']('username',_0x2c2b4a)['order']('score',{'ascending':![]})['limit'](0x1)['then'](_0x288224=>{if(_0x288224['error'])console['error']('Error\x20fetching\x20best\x20score:',_0x288224['error']),this['showGameOverScreen'](0x0);else{const _0x479462=_0x288224['data']['length']>0x0?_0x288224['data'][0x0]['score']:0x0;this['showGameOverScreen'](_0x479462);}})['catch'](error=>{console['error']('Error:',error),this['showGameOverScreen'](0x0);});},'showGameOverScreen':function(_0x5c5e72){this['gameOverGroup']=game['add']['group']();var gameOverText=this['gameOverGroup']['create'](game['width']/0x2,0x0,'game_over'),_0x52bbc1=this['gameOverGroup']['create'](game['width']/0x2,0x46,'score_board'),currentScoreText=game['add']['bitmapText'](game['width']/0x2+0x3c,0x69,'flappy_font',this['score']+'',0x14,this['gameOverGroup']),bestScoreText=game['add']['bitmapText'](game['width']/0x2+0x3c,0x99,'flappy_font',_0x5c5e72+'',0x14,this['gameOverGroup']);gameOverText['anchor']['setTo'](0.5,0x0),_0x52bbc1['anchor']['setTo'](0.5,0x0),this['gameOverGroup']['y']=0x1e,this['restartBtn']=game['add']['button'](game['width']/0x2,game['height']/0x2,'start-button',this['restartGame'],this),this['restartBtn']['anchor']['setTo'](0.5,0.5),this['rankingBtn']=game['add']['button'](game['width']/0x2,game['height']/0x2+0x50,'ranking-button',function(){window['location']['href']=window['baseUrl'];},this),this['rankingBtn']['anchor']['setTo'](0.5,0.5),this['spaceKey']=game['input']['keyboard']['addKey'](Phaser['Keyboard']['SPACEBAR']),this['spaceKey']['onDown']['addOnce'](this['restartGame'],this);},'saveScore':function(_0x5e2e92){const _0x202c4b=localStorage['getItem']('username');if(!_0x202c4b){console['error']('Username\x20not\x20found');return;}const _0x150342=Math['random']()['toString'](0x24)['substring'](0x2)+Date['now']()['toString'](0x24);console['log']('Saving\x20score:',{'username':_0x202c4b,'user_id':_0x150342,'score':_0x5e2e92}),supabaseClient['from']('scores')['insert']([{'username':_0x202c4b,'user_id':_0x150342,'score':_0x5e2e92}])['then'](_0x2d28e2=>{_0x2d28e2['error']?console['error']('Error\x20saving\x20score:',_0x2d28e2['error']):console['log']('Score\x20saved\x20successfully:',_0x2d28e2['data']);})['catch'](error=>{console['error']('Error\x20saving\x20score:',error);});},'generatePipes':function(_0x8dc44f){game['isDesktop']?_0x8dc44f=0x64:_0x8dc44f=_0x8dc44f||0x64;const _0x367846=0x1f9-0x140-_0x8dc44f+Math['floor']((0x1f9-0x70-0x1e-_0x8dc44f-0x1f9+0x140+_0x8dc44f)*Math['random']()),_0x15ebcc=_0x367846-0x168,_0x12e3f8=_0x367846+_0x8dc44f;if(this['resetPipe'](_0x15ebcc,_0x12e3f8))return;const _0x34d206=game['width'];var _0x222983=game['add']['sprite'](_0x34d206,_0x15ebcc,'pipe',0x0,this['pipeGroup']),_0x28e84c=game['add']['sprite'](_0x34d206,_0x12e3f8,'pipe',0x1,this['pipeGroup']);this['pipeGroup']['setAll']('checkWorldBounds',!![]),this['pipeGroup']['setAll']('outOfBoundsKill',!![]),this['pipeGroup']['setAll']('body.velocity.x',-this['gameSpeed']);},'resetPipe':function(_0x49b5a5,_0x2b179f){var _0x14b9af=0x0;const _0x14be94=game['isDesktop']?game['width']:game['width'];return this['pipeGroup']['forEachDead'](function(_0x4217c9){_0x4217c9['y']<=0x0?(_0x4217c9['reset'](_0x14be94,_0x49b5a5),_0x4217c9['hasScored']=![]):_0x4217c9['reset'](_0x14be94,_0x2b179f),_0x4217c9['body']['velocity']['x']=-this['gameSpeed'],_0x14b9af++;},this),_0x14b9af==0x2;},'checkScore':function(_0x5be646){if(!_0x5be646['hasScored']&&_0x5be646['y']<=0x0&&_0x5be646['x']<=this['bird']['x']-0x11-0x36)return _0x5be646['hasScored']=!![],this['scoreText']['text']=++this['score'],this['soundScore']['play'](),!![];return![];},'hitBoundary':function(){if(this['gameIsOver'])return;this['soundHitPipe']['play'](),this['gameOver']();},'restartGame':function(){game['state']['start']('play');},'shutdown':function(){window['posthog']&&posthog['stopSessionRecording']();}},game['state']['remove']('over'),game['state']['add']('boot',game['States']['boot']),game['state']['add']('preload',game['States']['preload']),game['state']['add']('menu',game['States']['menu']),game['state']['add']('play',game['States']['play']),game['state']['start']('boot');